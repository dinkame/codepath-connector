<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>לוח חוגים - מעוז אביב והסביבה</title>

   <!-- Social Media Preview Tags -->
<meta property="og:title" content="לוח החוגים של השכונה - מעוז אביב והסביבה">
<meta property="og:description" content="מצאו את החוג המושלם לילדים במעוז אביב והסביבה. כל החוגים במקום אחד!">
<meta property="og:image" content="https://kehilati.claudina.co.il/hugim/hugim-preview.jpg">
<meta property="og:url" content="https://kehilati.claudina.co.il/hugim/">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="לוח החוגים של השכונה - מעוז אביב והסביבה">
<meta name="twitter:description" content="מצאו את החוג המושלם לילדים במעוז אביב והסביבה. כל החוגים במקום אחד!">
<meta name="twitter:image" content="https://kehilati.claudina.co.il/hugim/hugim-preview.jpg">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Assistant', sans-serif;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-50">

    <div class="container mx-auto p-4 md:p-8">
        <!-- Header Section -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-blue-800">לוח החוגים של השכונה</h1>
            <p class="text-lg text-gray-600 mt-2">מצאו את החוג המושלם לילדים במעוז אביב והסביבה</p>
            <p class="text-sm text-gray-500 mt-2" id="lastUpdated"></p>
        </header>

        <!-- Missing Info Notice -->
        <div class="bg-yellow-100 border-r-4 border-yellow-500 text-yellow-800 p-4 rounded-md mb-8 shadow" role="alert">
            <p class="font-bold">שימו לב, האפליקציה עדיין בהרצה!</p>
            <p>חסר לנו מידע על חוגים מהמקומות הבאים:</p>
            <ul class="list-disc list-inside mt-2">
                <li>בית ספר דוד ילין</li>
                <li>בית ספר אלחריזי</li>
                <li>המרכז האולימפי (מידע חלקי)</li>
                <li>קאנטרי נאות אפקה (מידע חלקי)</li>
            </ul>
            <p class="mt-2">מצאתן משהו שגוי או חסר? נשמח אם תשלחו הודעה לדינה.</p>
        </div>

        <!-- Filters Section -->
        <div class="bg-white p-4 rounded-lg shadow-md mb-8 sticky top-0 z-10">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4">
                <!-- Search Input -->
                <div class="lg:col-span-1">
                    <label for="searchInput" class="block text-sm font-medium text-gray-700">חיפוש חופשי</label>
                    <input type="text" id="searchInput" placeholder="לדוגמה: כדורסל, אפרת..." class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2">
                </div>
                <!-- Neighborhood Filter -->
                <div>
                    <label for="neighborhoodFilter" class="block text-sm font-medium text-gray-700">שכונה</label>
                    <select id="neighborhoodFilter" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2">
                        <option value="">כל השכונות</option>
                        <option value="מעוז אביב">מעוז אביב</option>
                        <option value="הדר יוסף/נאות אפקה">הדר יוסף/נאות אפקה</option>
                    </select>
                </div>
                <!-- Center Filter -->
                <div>
                    <label for="centerFilter" class="block text-sm font-medium text-gray-700">מרכז קהילתי</label>
                    <select id="centerFilter" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2">
                        <option value="">כל המרכזים</option>
                        <!-- Options will be added dynamically -->
                    </select>
                </div>
                <!-- Day Filter -->
                <div>
                    <label for="dayFilter" class="block text-sm font-medium text-gray-700">יום בשבוע</label>
                    <select id="dayFilter" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2">
                        <option value="">כל הימים</option>
                        <option value="ראשון">ראשון</option>
                        <option value="שני">שני</option>
                        <option value="שלישי">שלישי</option>
                        <option value="רביעי">רביעי</option>
                        <option value="חמישי">חמישי</option>
                        <option value="שישי">שישי</option>
                        <option value="שבת">שבת</option>
                        <option value="ימים שונים">ימים שונים</option>
                    </select>
                </div>
                <!-- Age Group Filter -->
                <div>
                    <label for="ageFilter" class="block text-sm font-medium text-gray-700">קבוצת גיל</label>
                    <select id="ageFilter" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2">
                        <option value="">כל הגילאים</option>
                        <option value="גן">גן</option>
                        <option value="יסודי נמוך">יסודי (א'-ג')</option>
                        <option value="יסודי גבוה">יסודי (ד'-ו')</option>
                        <option value="חטיבה">חטיבה ומעלה</option>
                    </select>
                </div>
                <!-- Category Filter -->
                <div>
                    <label for="categoryFilter" class="block text-sm font-medium text-gray-700">תחום</label>
                    <select id="categoryFilter" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2">
                        <option value="">הכל</option>
                        <option value="ספורט">ספורט</option>
                        <option value="אומנות לחימה">אומנות לחימה</option>
                        <option value="אומנות ויצירה">אומנות ויצירה</option>
                        <option value="מחול ותנועה">מחול ותנועה</option>
                        <option value="העשרה">העשרה</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Activities Grid -->
        <div id="activitiesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Activity cards will be injected here by JavaScript -->
        </div>
        
        <!-- No Results Message -->
        <div id="noResultsMessage" class="text-center py-16 hidden">
            <h3 class="text-2xl font-semibold text-gray-700">לא נמצאו חוגים מתאימים</h3>
            <p class="text-gray-500 mt-2">אפשר לנסות לשנות את אפשרויות הסינון</p>
        </div>

    </div>

    <script>
        // --- DATA SOURCE ---
        const activities = [
            // --- מרכז קהילתי הדר אפקה ---
            { name: "ג'ודו", instructor: "רביב אהרון", day: "שני", age: "גן חובה - כיתות ב'", time: "16:30 - 17:15", location: "סטודיו אומנויות לחימה", center: "מרכז קהילתי הדר אפקה", category: "אומנות לחימה", ageTags: ["גן", "יסודי נמוך"], contact: { phone: "03-748-4500", person: "מזכירות הדר אפקה" } },
            { name: "גיטרה", instructor: "אגדת גרוסר", day: "שלישי", age: "כיתות א' - ג'", time: "16:30 - 17:00", location: "סטודיו נעימה", center: "מרכז קהילתי הדר אפקה", category: "העשרה", ageTags: ["יסודי נמוך"], contact: { phone: "052-1234567", person: "אגדת גרוסר" } },
            { name: "טאקוונדו", instructor: "רוען שנהב", day: "חמישי", age: "גן חובה - כיתה א'", time: "16:45 - 17:30", location: "סטודיו אומנויות לחימה", center: "מרכז קהילתי הדר אפקה", category: "אומנות לחימה", ageTags: ["גן", "יסודי נמוך"], contact: { phone: "03-748-4500", person: "מזכירות הדר אפקה" } },
            { name: "קפוארה", instructor: "קארין דורון", day: "ראשון", age: "גן - כיתה א'", time: "16:30 - 17:15", location: "לובי", center: "מרכז קהילתי הדר אפקה", category: "אומנות לחימה", ageTags: ["גן", "יסודי נמוך"], contact: { phone: "03-748-4500", person: "מזכירות הדר אפקה" } },
            { name: "אקרובטיקה", instructor: "מכבי תל אביב", day: "שני וחמישי", age: "גן + חובה", time: "16:45 - 17:30", location: "אולם ספורט", center: "מרכז קהילתי הדר אפקה", category: "מחול ותנועה", ageTags: ["גן"], contact: { phone: "03-748-4500", person: "מזכירות הדר אפקה" } },
            // --- בית פרנקפורט (Updated) ---
            { name: "כושר קיד", description: "פעילות גופנית המספקת לילדים מרחב להשתחרר, לפרוק אנרגיה ולפתח גוף בריא וחזק.", instructor: "לא צוין", day: "שני", age: "הליכה-2", time: "16:00-16:40", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "ספורט", ageTags: ["גן"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "כושר קיד", description: "פעילות גופנית המספקת לילדים מרחב להשתחרר, לפרוק אנרגיה ולפתח גוף בריא וחזק.", instructor: "לא צוין", day: "שני", age: "גיל 2-3", time: "16:45-17:25", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "ספורט", ageTags: ["גן"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "הגנה עצמית", instructor: "לא צוין", day: "שלישי", age: "גיל 4-6", time: "16:45-17:30", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "אומנות לחימה", ageTags: ["גן"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "הגנה עצמית", instructor: "לא צוין", day: "שלישי", age: "כיתות א'-ג'", time: "17:30-18:30", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "אומנות לחימה", ageTags: ["יסודי נמוך"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "יוגה לילדים", instructor: "לא צוין", day: "שני", age: "ט.חובה-חובה", time: "17:00-17:45", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "מחול ותנועה", ageTags: ["גן"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "קפוארה", instructor: "לא צוין", day: "חמישי", age: "ט.חובה-חובה", time: "17:00-17:45", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "אומנות לחימה", ageTags: ["גן"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "קפוארה", instructor: "לא צוין", day: "חמישי", age: "כיתות א'-ב'", time: "17:45-18:30", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "אומנות לחימה", ageTags: ["יסודי נמוך"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "כדורסל", instructor: "לא צוין", day: "ראשון", age: "כיתות א'-ב'", time: "17:00-18:00", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "ספורט", ageTags: ["יסודי נמוך"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "כדורסל", instructor: "לא צוין", day: "ראשון", age: "כיתות ג'-ד'", time: "18:00-19:00", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "ספורט", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "קרמיקה", description: "הזדמנות לבטא את עצמם בצורה חופשית ויצירתית, לגלות דמיון ולהתנסות בחומרים וטכניקות שונות.", instructor: "לא צוין", day: "ראשון", age: "חובה-א'", time: "17:00-17:45", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "אומנות ויצירה", ageTags: ["גן", "יסודי נמוך"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "קרמיקה", description: "הזדמנות לבטא את עצמם בצורה חופשית ויצירתית, לגלות דמיון ולהתנסות בחומרים וטכניקות שונות.", instructor: "לא צוין", day: "ראשון", age: "כיתות ב'-ג'", time: "17:45-18:45", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "אומנות ויצירה", ageTags: ["יסודי נמוך"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "ציור", instructor: "לא צוין", day: "רביעי", age: "ט.חובה-חובה", time: "17:00-17:55", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "אומנות ויצירה", ageTags: ["גן"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "תפירה ואמנות", instructor: "לא צוין", day: "שני", age: "כיתות ב'-ג'", time: "17:30-18:30", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "אומנות ויצירה", ageTags: ["יסודי נמוך"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "טיסנאות", description: "חוג המעודד לגלות, לשאול, לחקור וללמוד מתוך סקרנות טבעית והנאה.", instructor: "לא צוין", day: "ראשון", age: "מתחילים", time: "17:15-18:00", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "העשרה", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "מבוכים ודרקונים", instructor: "לא צוין", day: "שני", age: "כיתות ד'-ה'", time: "16:00-17:30", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "העשרה", ageTags: ["יסודי גבוה"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "שף בכיף", instructor: "לא צוין", day: "שלישי", age: "גילי גן", time: "17:00-18:00", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "העשרה", ageTags: ["גן"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "אילוף כלבים", instructor: "לא צוין", day: "רביעי", age: "כיתות ד'-ו'", time: "16:00-17:00", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "העשרה", ageTags: ["יסודי גבוה"], contact: { phone: "073-3844009", person: "אבידן דוראל" } },
            { name: "בלט קלאסי", description: "בית ספר מקצועי למחול לילדים ונוער בהובלה של צוות מורים ומורות מקצועי ומנוסה.", instructor: "גנאל סינטר", day: "ימים ושעות בתיאום", age: "ילדים ונוער", time: "משתנה", location: "בית פרנקפורט", center: "בית פרנקפורט", category: "מחול ותנועה", ageTags: ["יסודי נמוך", "יסודי גבוה", "חטיבה"], contact: { phone: "073-3844008", person: "גנאל סינטר" } },
            // --- בית ספר גיל ---
            { name: "ג'ודו", instructor: "איתי", day: "שלישי", age: "ילדי גן (4-6)", time: "16:30-17:15", location: "אולם ספורט", center: "בית ספר גיל", category: "אומנות לחימה", ageTags: ["גן"], contact: { phone: "052-346-4823", person: "איתי" } },
            { name: "ג'ודו", instructor: "איתי", day: "שלישי", age: "כיתות א'-ב'", time: "17:15-18:00", location: "אולם ספורט", center: "בית ספר גיל", category: "אומנות לחימה", ageTags: ["יסודי נמוך"], contact: { phone: "052-346-4823", person: "איתי" } },
            { name: "טניס שולחן (מתחילים)", instructor: "לא צוין", day: "ראשון ורביעי", age: "יסודי", time: "16:30-17:30", location: "חדר פינג פונג", center: "בית ספר גיל", category: "ספורט", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "052-346-4823", person: "איתי (לבירור)" } },
            // --- המרכז האולימפי ---
            { name: "התעמלות אומנותית - נבחרות", instructor: "צוות המאמנות", day: "ימים שונים", age: "נבחרות", time: "משתנה", location: "הדר יוסף", center: "המרכז האולימפי", category: "מחול ותנועה", ageTags: ["יסודי גבוה", "חטיבה"], contact: { phone: "03-649-8383", person: "המרכז האולימפי" } },
            { name: "התעמלות אומנותית - גנים", instructor: "אורטל שוורץ", day: "ימים שונים", age: "גנים", time: "16:00-17:00", location: "הדר יוסף", center: "המרכז האולימפי", category: "מחול ותנועה", ageTags: ["גן"], contact: { phone: "03-649-8383", person: "המרכז האולימפי" } },
            // --- קאנטרי קהילתי נאות אפקה ---
            { name: "פרוגרס", instructor: "לא צוין", day: "ראשון", age: "גן טרום טרום חובה", time: "16:30-17:15", location: "אולם רב תכליתי", center: "קאנטרי נאות אפקה", category: "מחול ותנועה", ageTags: ["גן"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            { name: "התעמלות אומנותית", instructor: "לא צוין", day: "שני", age: "כיתות ג'-ד'", time: "16:00-16:45", location: "אולם רב תכליתי", center: "קאנטרי נאות אפקה", category: "מחול ותנועה", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            { name: "ג'ודו", instructor: "לא צוין", day: "שלישי", age: "כיתות ה'-ו'", time: "16:00-16:45", location: "אולם רב תכליתי", center: "קאנטרי נאות אפקה", category: "אומנות לחימה", ageTags: ["יסודי גבוה"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            { name: "קפוארה", instructor: "לא צוין", day: "רביעי", age: "טרום חובה-חובה", time: "16:30-17:10", location: "אולם רב תכליתי", center: "קאנטרי נאות אפקה", category: "אומנות לחימה", ageTags: ["גן"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            { name: "היפ הופ", instructor: "לא צוין", day: "חמישי", age: "כיתות ג'-ד'", time: "16:30-17:15", location: "אולם רב תכליתי", center: "קאנטרי נאות אפקה", category: "מחול ותנועה", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            { name: "שחמט", instructor: "לא צוין", day: "שישי", age: "מתחילים", time: "13:30-14:15", location: "אולם רב תכליתי", center: "קאנטרי נאות אפקה", category: "העשרה", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            { name: "כדורגל", instructor: "לא צוין", day: "שני וחמישי", age: "כיתות ג'-ד'", time: "15:45-16:30", location: "מתחם חיצוני", center: "קאנטרי נאות אפקה", category: "ספורט", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            { name: "שחייה - התקדמות", instructor: "צוות המדריכים", day: "ראשון", age: "קבוצת התקדמות", time: "16:45-17:30", location: "בריכה", center: "קאנטרי נאות אפקה", category: "ספורט", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            { name: "שחייה - צעירים א'", instructor: "צוות המדריכים", day: "שני", age: "קבוצת צעירים", time: "17:30-19:00", location: "בריכה", center: "קאנטרי נאות אפקה", category: "ספורט", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            { name: "שחייה - נוער ב'", instructor: "צוות המדריכים", day: "רביעי", age: "קבוצת נוער", time: "19:00-20:30", location: "בריכה", center: "קאנטרי נאות אפקה", category: "ספורט", ageTags: ["חטיבה"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            { name: "שחייה - קטנטנים", instructor: "צוות המדריכים", day: "חמישי", age: "קבוצת קטנטנים", time: "16:15-17:00", location: "בריכה", center: "קאנטרי נאות אפקה", category: "ספורט", ageTags: ["גן"], contact: { phone: "03-648-1155", person: "מזכירות הקאנטרי" } },
            // --- בית ספר מגן ---
            { name: "כדורסל", instructor: "ניב זילברשטיין", day: "שלישי", age: "כיתות א'-ב'", time: "16:30-17:30", location: "אולם ספורט", center: "בית ספר מגן", category: "ספורט", ageTags: ["יסודי נמוך"], contact: { phone: "03-6475954", email: "office@maccabi.co.il", person: "מכבי תל אביב" } },
            { name: "כדורסל", instructor: "ניב זילברשטיין", day: "שלישי", age: "כיתה ג'", time: "15:30-16:30", location: "אולם ספורט", center: "בית ספר מגן", category: "ספורט", ageTags: ["יסודי נמוך"], contact: { phone: "03-6475954", email: "office@maccabi.co.il", person: "מכבי תל אביב" } },
            { name: "כדורסל", instructor: "ניב זילברשטיין", day: "שלישי", age: "כיתה ד'", time: "14:30-15:30", location: "אולם ספורט", center: "בית ספר מגן", category: "ספורט", ageTags: ["יסודי גבוה"], contact: { phone: "03-6475954", email: "office@maccabi.co.il", person: "מכבי תל אביב" } },
            { name: "כדורעף", instructor: "נעם אלבז, דימה זים", day: "שני וחמישי", age: "כיתות ג'-ד'", time: "15:30-16:30", location: "אולם ספורט", center: "בית ספר מגן", category: "ספורט", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "052-8391725", person: "נעם אלבז" } },
            { name: "כדורעף", instructor: "נעם אלבז, דימה זים", day: "שני וחמישי", age: "כיתות ה'-ו'", time: "14:30-15:30", location: "אולם ספורט", center: "בית ספר מגן", category: "ספורט", ageTags: ["יסודי גבוה"], contact: { phone: "052-8391725", person: "נעם אלבז" } },
            { name: "מדע ורפואה", instructor: "צוות מדריכים", day: "חמישי", age: "גן חובה", time: "17:15-18:00", location: "כיתה", center: "בית ספר מגן", category: "העשרה", ageTags: ["גן"], contact: { phone: "053-929-5311", email: "Madaverfoa.tlv@gmail.com", person: "מדע ורפואה" } },
            { name: "מדע ורפואה", instructor: "צוות מדריכים", day: "חמישי", age: "כיתות א'-ב'", time: "16:30-17:15", location: "כיתה", center: "בית ספר מגן", category: "העשרה", ageTags: ["יסודי נמוך"], contact: { phone: "053-929-5311", email: "Madaverfoa.tlv@gmail.com", person: "מדע ורפואה" } },
            { name: "טיסנאות", instructor: "עוף גוזל", day: "שלישי", age: "כיתות א'-ג'", time: "16:30-17:15", location: "כיתה", center: "בית ספר מגן", category: "העשרה", ageTags: ["יסודי נמוך"], contact: { phone: "050-4602799", person: "עוף גוזל" } },
            { name: "טיסנאות", instructor: "עוף גוזל", day: "שלישי", age: "כיתות ד'-ו'", time: "14:30-15:30", location: "כיתה", center: "בית ספר מגן", category: "העשרה", ageTags: ["יסודי גבוה"], contact: { phone: "050-4602799", person: "עוף גוזל" } },
            { name: "התעמלות קרקע", instructor: "אדר בונה", day: "שני", age: "גן טרום חובה", time: "17:15-18:00", location: "אולם ספורט", center: "בית ספר מגן", category: "מחול ותנועה", ageTags: ["גן"], contact: { phone: "052-4489515", person: "אדר בונה" } },
            { name: "התעמלות קרקע", instructor: "אדר בונה", day: "חמישי", age: "גן חובה", time: "17:15-18:00", location: "אולם ספורט", center: "בית ספר מגן", category: "מחול ותנועה", ageTags: ["גן"], contact: { phone: "052-4489515", person: "אדר בונה" } },
            { name: "התעמלות קרקע", instructor: "אדר בונה", day: "שני וחמישי", age: "כיתות א'-ב'", time: "16:30-17:15", location: "אולם ספורט", center: "בית ספר מגן", category: "מחול ותנועה", ageTags: ["יסודי נמוך"], contact: { phone: "052-4489515", person: "אדר בונה" } },
            { name: "ג'ודו", instructor: "מיכל אפרת", day: "ראשון ורביעי", age: "גן טרום חובה", time: "17:00-17:45", location: "אולם ספורט", center: "בית ספר מגן", category: "אומנות לחימה", ageTags: ["גן"], contact: { phone: "054-5609075", person: "מיכל אפרת" } },
            { name: "ג'ודו", instructor: "מיכל אפרת", day: "ראשון ורביעי", age: "כיתות א'-ב'", time: "16:15-17:00", location: "אולם ספורט", center: "בית ספר מגן", category: "אומנות לחימה", ageTags: ["יסודי נמוך"], contact: { phone: "054-5609075", person: "מיכל אפרת" } },
            { name: "אלקטרוניקה", instructor: "צחי ציפרוט", day: "לא צוין", age: "כיתות א'-ד'", time: "15:30 / 16:30", location: "כיתה", center: "בית ספר מגן", category: "העשרה", ageTags: ["יסודי נמוך", "יסודי גבוה"], contact: { phone: "054-6530007", person: "צחי ציפרוט" } },
            { name: "כדורגל", instructor: "לירון בחאש", day: "שני וחמישי", age: "גן טרום חובה", time: "17:15-18:00", location: "מגרש כדורגל", center: "בית ספר מגן", category: "ספורט", ageTags: ["גן"], contact: { phone: "052-2901032", person: "לירון בחאש" } },
            { name: "כדורגל", instructor: "לירון בחאש", day: "שני וחמישי", age: "כיתות א'-ב'", time: "16:30-17:15", location: "מגרש כדורגל", center: "בית ספר מגן", category: "ספורט", ageTags: ["יסודי נמוך"], contact: { phone: "052-2901032", person: "לירון בחאש" } },
            { name: "שחמט", instructor: "בראש חושב", day: "שלישי", age: "כל הגילאים", time: "16:00-17:30", location: "כיתה", center: "בית ספר מגן", category: "העשרה", ageTags: ["גן", "יסודי נמוך", "יסודי גבוה"], contact: { phone: "058-5333223", person: "בראש חושב" } },
            { name: "היפ הופ", instructor: "עילי נאור", day: "רביעי", age: "גן חובה - כיתה א'", time: "17:15-18:00", location: "סטודיו", center: "בית ספר מגן", category: "מחול ותנועה", ageTags: ["גן", "יסודי נמוך"], contact: { phone: "054-7534611", person: "עילי נאור" } },
            { name: "החלקה על גלגליות", instructor: "נעה", day: "לא צוין", age: "גילאי 5+", time: "17:00-19:30", location: "אולם ספורט", center: "בית ספר מגן", category: "ספורט", ageTags: ["גן", "יסודי נמוך", "יסודי גבוה"], contact: { phone: "052-2270742", person: "נעה" } },
            { name: "קפוארה", instructor: "ברק מחירצ'יק", day: "שני וחמישי", age: "גן (מגיל 4)", time: "17:00-17:45", location: "סטודיו", center: "בית ספר מגן", category: "אומנות לחימה", ageTags: ["גן"], contact: { phone: "052-3843133", person: "ברק מחירצ'יק" } },
            { name: "פיננספורט", instructor: "משקיעי העתיד", day: "רביעי", age: "כיתות א'-ב'", time: "16:30-17:15", location: "כיתה", center: "בית ספר מגן", category: "העשרה", ageTags: ["יסודי נמוך"], contact: { phone: "050-2105989", person: "משקיעי העתיד" } },
            // --- חוגים עצמאיים ---
            { name: "יוגה לילדותים", instructor: "הגר", day: "ימים ושעות בתיאום", age: "גילאי גן ויסודי", time: "אחה\"צ", location: "מעוז אביב", center: "חוג עצמאי - מעוז אביב", category: "מחול ותנועה", ageTags: ["גן", "יסודי נמוך"], contact: { phone: "054-4623017", person: "הגר" } }
        ];

        // --- DOM ELEMENTS ---
        const grid = document.getElementById('activitiesGrid');
        const searchInput = document.getElementById('searchInput');
        const centerFilter = document.getElementById('centerFilter');
        const dayFilter = document.getElementById('dayFilter');
        const ageFilter = document.getElementById('ageFilter');
        const categoryFilter = document.getElementById('categoryFilter');
        const neighborhoodFilter = document.getElementById('neighborhoodFilter');
        const noResultsMessage = document.getElementById('noResultsMessage');
        const lastUpdatedElement = document.getElementById('lastUpdated');

        // --- FUNCTIONS ---

        /**
         * Sets the last updated date.
         */
        function setLastUpdatedDate() {
            const date = new Date();
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            lastUpdatedElement.textContent = `עדכון אחרון: ${day}.${month}.${year}`;
        }

        /**
         * Populates the center filter dropdown with unique center names based on selected neighborhood.
         */
        function populateCenterFilter(selectedNeighborhood = '') {
            const neighborhoodMap = {
                "בית ספר מגן": "מעוז אביב",
                "חוג עצמאי - מעוז אביב": "מעוז אביב",
                "בית פרנקפורט": "הדר יוסף/נאות אפקה",
                "המרכז האולימפי": "הדר יוסף/נאות אפקה",
                "מרכז קהילתי הדר אפקה": "הדר יוסף/נאות אפקה",
                "קאנטרי נאות אפקה": "הדר יוסף/נאות אפקה",
                "בית ספר גיל": "הדר יוסף/נאות אפקה"
            };

            let filteredActivities = activities;
            if (selectedNeighborhood) {
                filteredActivities = activities.filter(activity => neighborhoodMap[activity.center] === selectedNeighborhood);
            }

            const centers = [...new Set(filteredActivities.map(activity => activity.center))];
            centers.sort();
            
            centerFilter.innerHTML = '<option value="">כל המרכזים</option>'; // Reset and add default
            
            centers.forEach(center => {
                const option = document.createElement('option');
                option.value = center;
                option.textContent = center;
                centerFilter.appendChild(option);
            });
        }

        /**
         * Groups activities by name and center.
         * @param {Array} activitiesArray - The array of activity objects to group.
         * @returns {Array} - An array of grouped activity objects.
         */
        function groupActivities(activitiesArray) {
            const neighborhoodMap = {
                "בית ספר מגן": "מעוז אביב",
                "חוג עצמאי - מעוז אביב": "מעוז אביב",
                "בית פרנקפורט": "הדר יוסף/נאות אפקה",
                "המרכז האולימפי": "הדר יוסף/נאות אפקה",
                "מרכז קהילתי הדר אפקה": "הדר יוסף/נאות אפקה",
                "קאנטרי נאות אפקה": "הדר יוסף/נאות אפקה",
                "בית ספר גיל": "הדר יוסף/נאות אפקה"
            };

            const grouped = {};
            activitiesArray.forEach(activity => {
                const key = `${activity.name}-${activity.center}`; // Unique key per activity type at a center
                if (!grouped[key]) {
                    grouped[key] = {
                        name: activity.name,
                        instructor: activity.instructor,
                        center: activity.center,
                        category: activity.category,
                        location: activity.location,
                        contact: activity.contact,
                        description: activity.description,
                        neighborhood: neighborhoodMap[activity.center] || null,
                        groups: [],
                        allAgeTags: new Set(),
                        allDays: new Set()
                    };
                }
                grouped[key].groups.push({
                    age: activity.age,
                    time: activity.time,
                    day: activity.day
                });
                if(activity.ageTags) {
                    activity.ageTags.forEach(tag => grouped[key].allAgeTags.add(tag));
                }
                if(activity.day) {
                    activity.day.split(' ו').forEach(d => grouped[key].allDays.add(d.trim()));
                }
            });
            
            Object.values(grouped).forEach(group => {
                group.allAgeTags = Array.from(group.allAgeTags);
                group.allDays = Array.from(group.allDays);
                 // If an instructor is not consistent, generalize it
                const instructors = new Set(activitiesArray.filter(a => a.name === group.name && a.center === group.center).map(a => a.instructor));
                if (instructors.size > 1) {
                    group.instructor = "צוות מדריכים";
                }
            });
            return Object.values(grouped);
        }


        /**
         * Renders the list of activities to the grid.
         * @param {Array} activitiesToRender - The array of grouped activity objects to display.
         */
        function renderActivities(activitiesToRender) {
            grid.innerHTML = ''; // Clear existing cards

            if (activitiesToRender.length === 0) {
                noResultsMessage.classList.remove('hidden');
            } else {
                noResultsMessage.classList.add('hidden');
            }

            activitiesToRender.forEach(activity => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-lg shadow-lg overflow-hidden flex flex-col justify-between transform hover:-translate-y-1 transition-transform duration-300';
                
                const groupsHtml = activity.groups.map(group => `
                    <div class="flex items-center justify-between py-2 border-b last:border-b-0">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 ml-2 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-3-5.197m0 0A4 4 0 0012 4.354m0 5.292a4 4 0 010 5.292"></path></svg>
                            <span class="font-semibold">${group.age}</span>
                        </div>
                        <span class="text-sm text-gray-600">${group.day}, ${group.time}</span>
                    </div>
                `).join('');

                let contactHtml = '';
                if (activity.contact && activity.contact.phone) {
                    contactHtml += `
                        <a href="tel:${activity.contact.phone}" class="flex-1 text-center block bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 flex items-center justify-center">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                            <span>${activity.contact.phone}</span>
                        </a>`;
                }
                if (activity.contact && activity.contact.email) {
                    contactHtml += `
                        <a href="mailto:${activity.contact.email}" class="flex-1 text-center block bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 flex items-center justify-center">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                            <span>שלח מייל</span>
                        </a>`;
                }


                card.innerHTML = `
                    <div>
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-2">
                                <h2 class="text-2xl font-bold text-gray-800">${activity.name}</h2>
                                <span class="bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">${activity.center}</span>
                            </div>
                            <p class="text-md text-gray-600 font-semibold mb-2">${activity.instructor}</p>
                             <div class="flex items-center text-sm text-gray-500 mb-4">
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                <span>${activity.location}</span>
                            </div>
                            ${activity.description ? `<p class="text-sm text-gray-600 mt-2 mb-4">${activity.description}</p>` : ''}
                            <div class="space-y-1 text-gray-800">
                                ${groupsHtml}
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-6 py-4 mt-auto border-t border-gray-200">
                        <div class="flex gap-2 justify-center">
                            ${contactHtml}
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        /**
         * Filters the activities based on the current filter values.
         */
        function filterAndRender() {
            const groupedActivities = groupActivities(activities);
            const searchTerm = searchInput.value.toLowerCase();
            const selectedCenter = centerFilter.value;
            const selectedDay = dayFilter.value;
            const selectedAge = ageFilter.value;
            const selectedCategory = categoryFilter.value;
            const selectedNeighborhood = neighborhoodFilter.value;

            const filtered = groupedActivities.filter(activity => {
                const matchesSearch = activity.name.toLowerCase().includes(searchTerm) || activity.instructor.toLowerCase().includes(searchTerm);
                const matchesCenter = !selectedCenter || activity.center === selectedCenter;
                const matchesDay = !selectedDay || activity.allDays.some(day => day.includes(selectedDay));
                const matchesAge = !selectedAge || activity.allAgeTags.includes(selectedAge);
                const matchesCategory = !selectedCategory || activity.category === selectedCategory;
                const matchesNeighborhood = !selectedNeighborhood || activity.neighborhood === selectedNeighborhood;

                return matchesSearch && matchesCenter && matchesDay && matchesAge && matchesCategory && matchesNeighborhood;
            });

            renderActivities(filtered);
        }

        // --- EVENT LISTENERS ---
        searchInput.addEventListener('input', filterAndRender);
        centerFilter.addEventListener('change', filterAndRender);
        dayFilter.addEventListener('change', filterAndRender);
        ageFilter.addEventListener('change', filterAndRender);
        categoryFilter.addEventListener('change', filterAndRender);
        neighborhoodFilter.addEventListener('change', () => {
            populateCenterFilter(neighborhoodFilter.value);
            filterAndRender();
        });

        // --- INITIALIZATION ---
        setLastUpdatedDate();
        populateCenterFilter();
        filterAndRender(); // Initial render with grouped data
    </script>

</body>
</html>
